// Generated by CoffeeScript 1.3.1
(function() {
  var addFodder, fodder_list;

  fodder_list = new FodderList;

  window.fodder_list = fodder_list;

  addFodder = function() {
    var id;
    fodder_list.append(new Fodder);
    id = fodder_list.lastIndex();
    return jQuery('#fodder_header_table').append("<tr>\n  <td><input type=\"text\" class=\"fodder-name\" id=\"fodder_name_" + id + "\" /></td>\n  <td><input type=\"text\" id=\"fodder_amount_" + id + "\" /></td>\n  <td><input type=\"text\" id=\"fodder_solids_" + id + "\" /></td>\n  <td><input type=\"text\" id=\"fodder_energy_" + id + "\" /></td>\n  <td><input type=\"text\" id=\"fodder_protein_" + id + "\" /></td>\n  <td><input type=\"text\" id=\"fodder_calcium_" + id + "\" /></td>\n  <td><input type=\"text\" id=\"fodder_phosphor_" + id + "\" /></td>\n  <td><input type=\"text\" id=\"fodder_magnesium_" + id + "\" /></td>\n  <td><input type=\"text\" id=\"fodder_selenium_" + id + "\" /></td>\n  <td><div id=\"add_fodder\">LÃ¤gg till nytt foder</div></td>\n</tr>\n");
  };

  jQuery(function() {
    addFodder();
    jQuery('#add_fodder').live('click', function() {
      return addFodder();
    });
    return jQuery('#fodder_header_table input').live('keyup', function() {
      var elementId, elementName, idString, totals, _matchData, _ref;
      idString = jQuery(this).attr('id');
      _ref = idString.match(/_([a-z]+)_(\d+)/), _matchData = _ref[0], elementName = _ref[1], elementId = _ref[2];
      fodder_list.getFodderByIndex(elementId)[elementName] = jQuery("#fodder_" + elementName + "_" + elementId).val();
      totals = fodder_list.calculate();
      jQuery('#total_solids').val(totals.solids);
      jQuery('#total_energy').val(totals.energy);
      jQuery('#total_protein').val(totals.protein);
      jQuery('#total_calcium').val(totals.calcium);
      jQuery('#total_phosphor').val(totals.phosphor);
      jQuery('#total_magnesium').val(totals.magnesium);
      return jQuery('#total_selenium').val(totals.selenium);
    });
  });

}).call(this);
